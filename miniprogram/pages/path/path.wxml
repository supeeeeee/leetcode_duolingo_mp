<!--pages/path/path.wxml-->
<view class="container">
  <view class="path-header">
    <view class="header-decoration-circle circle-1"></view>
    <view class="header-decoration-circle circle-2"></view>
    
    <view class="header-text-group">
      <view class="title-row">
        <view class="path-title-badge">
          <text class="path-title">å­¦ä¹ è·¯å¾„</text>
        </view>
        <text class="header-mascot">ğŸ§­</text>
      </view>
      <text class="path-subtitle">æŒ‰ä¸»é¢˜é€ä¸€æ”»å…‹ LeetCode</text>
    </view>
    
    <view class="path-hint-container" wx:if="{{showCoreFirstHint}}">
      <view class="path-hint-bubble">
        <view class="hint-content">
          <text class="hint-icon">ğŸ’¡</text>
          <text class="hint-text">å°è´´å£«ï¼šå…ˆå®Œæˆæ ¸å¿ƒé¢˜ï¼Œå†æ‹“å±•é¢å¤–é¢˜ï¼Œæ•ˆç‡æ›´é«˜ã€‚</text>
        </view>
        <view class="bubble-tail"></view>
      </view>
    </view>
  </view>

  <scroll-view scroll-y class="path-scroll">
    <view class="path-container">
      <view class="path-line"></view>

      <block wx:if="{{topics.length > 0}}">
        <view class="topic-item {{item.isCompleted ? 'completed' : ''}} {{item.isMastered ? 'mastered' : ''}}" wx:for="{{topics}}" wx:key="id" bindtap="startTopic" data-id="{{item.id}}" hover-class="topic-active" hover-stay-time="100">

          <!-- Progress badge -->
          <view class="progress-badge" wx:if="{{item.isCompleted}}">
            <text>{{item.lessonsDone}}/{{item.totalLessons}}</text>
          </view>

          <view class="topic-icon-wrapper">
            <view class="topic-icon" style="background: linear-gradient(135deg, {{item.color}}, {{item.color}}cc)">
              <text class="topic-emoji">{{getTopicEmoji(item.id)}}</text>
            </view>
          </view>

          <view class="topic-content">
            <view class="topic-header">
              <text class="topic-title">{{item.title}}</text>
              <view class="level-badge level-{{item.level}}">ç­‰çº§ {{item.level}}</view>
            </view>
            <text class="topic-desc">{{item.description}}</text>
            <view class="topic-progress" wx:if="{{item.isCompleted}}">
              <view class="progress-track">
                <view class="progress-fill" style="width: {{item.percent}}%; background-color: {{item.color}}"></view>
              </view>
              <text class="progress-text">{{item.percent}}%</text>
            </view>
            <view class="track-progress-row" wx:if="{{item.hasCore || item.hasExtra}}">
              <view class="track-progress-item" wx:if="{{item.hasCore}}">
                <text class="track-progress core">æ ¸å¿ƒ {{item.coreDone}}/{{item.coreTotal}}</text>
                <text class="track-progress-remaining">å‰©ä½™ {{item.coreRemaining}} é¢˜</text>
              </view>
              <view class="track-progress-item" wx:if="{{item.hasExtra}}">
                <text class="track-progress extra">æ‰©å±• {{item.extraDone}}/{{item.extraTotal}}</text>
                <text class="track-progress-remaining">å‰©ä½™ {{item.extraRemaining}} é¢˜</text>
              </view>
            </view>
          </view>

          <view class="topic-arrow">ã€‰</view>
        </view>
      </block>

      <block wx:else>
        <view class="empty-state">
          <view class="empty-icon">ğŸ“š</view>
          <text class="empty-title">æš‚æ— ä¸»é¢˜</text>
          <text class="empty-desc">è¯·ç¨åå†æ¥çœ‹çœ‹æ–°çš„å­¦ä¹ è·¯å¾„ï¼</text>
        </view>
      </block>
      
      <!-- Completion Reward -->
      <view class="path-reward" wx:if="{{isAllCompleted && topics.length > 0}}">
        <view class="reward-icon">ğŸ†</view>
        <text class="reward-text">è·¯å¾„å·²å…¨éƒ¨å®Œæˆï¼</text>
      </view>
    </view>
  </scroll-view>
</view>
